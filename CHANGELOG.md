# Changelog

All notable changes to this project will be documented in this file.

## [1.0.5] - 2025-12-10

### Added
- **JWT (JSON Web Token) Authentication** - Bonus feature implementation
  - Added JWT token generation endpoint: `POST /wp-json/pagebuilder/v1/auth/token`
  - Implemented JWT encoding/decoding with HMAC-SHA256 signing (RFC 7519 compliant)
  - API now supports both API key and JWT token authentication
  - JWT tokens can be generated by exchanging API keys
  - Configurable JWT token expiration (30 minutes to 24 hours)
  - JWT settings added to admin interface (Settings tab)
  - Updated API documentation with JWT authentication examples
  - JWT tokens include API key ID, name, and permissions in payload
  - Automatic token expiration validation
  - JWT authentication can be enabled/disabled in settings

### Changed
- Updated version to 1.0.5
- Authentication middleware now checks JWT tokens first (if enabled), then falls back to API key authentication
- API documentation expanded with JWT token generation and usage examples

### Technical Details
- JWT implementation uses base64url encoding for header and payload
- Tokens include standard claims: `iat` (issued at), `exp` (expiration), `nbf` (not before)
- Custom claims: `key_id`, `key_name`, `permissions`
- JWT secret is auto-generated and stored securely in WordPress options
- Rate limiting and permission checks apply to both API keys and JWT tokens

## [1.0.4] - 2025-12-10

### Fixed
- Fixed rate limiting not working correctly - now properly blocks requests when limit is exceeded
- Fixed timezone mismatch in rate limit check (now uses WordPress timezone consistently)
- Fixed rate limit check time comparison (changed from > to >= for accurate boundary checking)
- Fixed rate limit errors not being logged - now logs 429 errors for monitoring
- Fixed expired keys showing regenerate button - now only REVOKED keys can be regenerated
- Fixed regenerate modal not displaying new API key - now properly shows modal with copy functionality
- Fixed regenerate response handling - corrected response data structure parsing

### Changed
- Updated version to 1.0.4
- Rate limiting now properly returns 429 status code and prevents page creation when limit exceeded
- Regenerate functionality now preserves expiration date, created date, and last used date correctly

## [1.0.3] - 2025-12-10

### Fixed
- Fixed regenerate API key modal not showing the new key - now displays modal with copy functionality
- Fixed CSV export error - improved response handling and error messages
- Fixed Created Pages data loss - updated to use pagination instead of hard limit
- Fixed first pre tag (Authorization header) missing horizontal scroll
- Fixed regenerate button not showing success message when modal is displayed

### Added
- Copy buttons on all pre code blocks in API Documentation tab (top right corner)
- Mobile responsive layout for webhook secret field - regenerate button moves below input on mobile
- Mobile responsive layout for API Keys filter - filter moves below title on mobile

### Changed
- Moved API Keys status filter to card header (same line as title) for better space utilization
- Updated version to 1.0.3
- Improved mobile responsiveness across admin interface

## [1.0.2] - 2025-12-10

### Fixed
- Fixed restore button changed to regenerate - generates new API key while preserving name, expiration date, created date, and last used
- Fixed API keys with past expiration dates now created as EXPIRED status and won't work
- Fixed expired keys automatically marked as EXPIRED on API requests (checked before status check)
- Fixed CSV export error - now returns JSON response for AJAX calls
- Changed password toggle icon from monkey to closed eye (üëÅÔ∏è‚Äçüó®Ô∏è)
- Added Request Count column to API keys table
- Made all tables responsive with horizontal scroll (spb-keys-table, spb-logs-table, spb-pages-table)
- Fixed all pre code blocks to have consistent horizontal scroll

### Added
- Regenerate functionality shows new API key in modal (same as generate)
- Table wrapper for responsive horizontal scrolling
- Pagination for all three tabs (API Keys, Activity Log, Created Pages) - 20 items per page
- Status filter for API Keys tab (All, Active, Revoked, Expired)
- Pagination controls with Previous/Next buttons, page numbers, and entry count info

### Removed
- Removed delete functionality (not mentioned in Task.md requirements)
- Removed database cleanup on uninstall (not mentioned in Task.md requirements)

### Changed
- Updated version to 1.0.2
- Database tables and options are preserved on plugin uninstall
- Restore button renamed to Regenerate
- Regenerate preserves key metadata (name, expiration, created date, last used) but generates new key
- All list views now use pagination (20 items per page) instead of showing all items
- API Keys tab now includes status filtering capability

## [1.0.1] - 2025-12-10

### Fixed
- Fixed default expiration date from settings not being applied when generating API keys without explicit expiration
- Fixed missing expiration date column in API keys table
- Fixed missing expiration date in API key details modal
- Fixed token preview code color not displaying (now shows black text)
- Fixed code tag colors in API documentation tab (now properly styled)
- Removed icons from empty state messages

### Added
- Added ability to restore revoked API keys back to active status
- Added expiration date display in API key details modal
- Added restore button for revoked keys in table

### Changed
- Changed revoke button color from red to warning (yellow/orange) to differentiate from delete
- Updated version to 1.0.1

## [1.0.0] - 2025-12-10

### Added
- Initial release
- Secure REST API endpoint for bulk page creation
- API key authentication system with hashed storage
- Admin interface with 5 tabs (API Keys, Activity Log, Created Pages, Settings, Documentation)
- Webhook notifications with HMAC-SHA256 signatures
- Rate limiting per API key
- Activity logging with CSV export
- Created pages tracking
- API key expiration support
- Modern card-based UI design
